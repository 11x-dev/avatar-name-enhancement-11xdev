*******************
***Hint***
*******************

Try combining your server calls and state updates into a single function instead of splitting them apart.

This should hopefully help you implement the enhancement, while making the code more maintainable and readable. 